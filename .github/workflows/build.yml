name: Build Kernel for sweet (A15)

on:
  workflow_dispatch:
  push:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Install dependencies (Ubuntu 24.04 compatible)
      run: |
        sudo dpkg --add-architecture i386
        sudo apt update
        sudo apt install -y bc bison build-essential ccache curl flex g++-multilib gcc-multilib git libncurses-dev libc6:i386 libstdc++6:i386 libssl-dev liblz4-tool zip zlib1g-dev:i386 python3
        # Verify ncurses (should be v6+)
        dpkg -l | grep ncurses || true

    - name: Use Proton-Clang (stable 2024 build)
      run: |
        mkdir clang && cd clang
        curl -LO https://github.com/kdrag0n/proton-clang/releases/download
